<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script type="application/javascript">
      function handleResponse(response) {
        //document.getElementById('ajaxIndicator').style.visibility = 'hidden';
        if (!response.text) {
          console.error('Kutsu palautti virheen', response);
          document.getElementById('response').innerHTML = 'Virhe palvelimelta: ' + response;
          return;
        }
        return response.text();
      }

      function displayResponseBody(responseText) {
        var list = document.getElementById('haku-list');
        var parsedResponse = JSON.parse(responseText);
        parsedResponse.forEach(function(row) {
          var rowElement = document.createElement("li");
          rowElement.appendChild(document.createTextNode(JSON.stringify(row)));
          list.appendChild(rowElement);
        });
      }

      function loadHakuList() {
        var url = '/valinta-tulos-service/auth/puuttuvat/yhteenveto';
        console.log('About to get from URL ' + url);
        fetch(url, { method: 'get'})
          .then(handleResponse)
          .then(displayResponseBody)
          .catch(handleResponse);
      }
    </script>
</head>
<body onload="loadHakuList();">
<div>
    <h3>Haut</h3>
    <ul id="haku-list">
    </ul>
</div>
</body>
</html>
